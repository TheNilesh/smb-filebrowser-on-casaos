# FileBrowser Quantum Configuration File
# ! This file must be placed at /DATA/AppData/filebrowser-quantum/data/config/config.yaml
# Documentation: https://filebrowserquantum.com/en/docs/
# Source: https://filebrowserquantum.com/en/docs/reference/fullconfig/

# Must mount volumes at these paths or change them here.
# /users - Base directory for user home directories.
# /family_docs - Shared read-only documents for family members.
# /media - Media directory for all users.
# /cache - Temporary files, cache, and previews.

server:
  # Directory for temporary files, cache, and previews.
  # We map this to /cache to keep it out of your main data backup.
  cacheDir: /cache

  # Path to the database file
  database: /database/filebrowser.db
  
  # Maximum size of zip archives created for download (in GB).
  # Default: 0 (unlimited)
  maxArchiveSize: 1
  
  # Number of image processing workers. 
  # Higher values use more CPU but process thumbnails faster. Default: 4
  numImageProcessors: 4

  disablePreviews: false                  # disable all previews thumbnails, simple icons will be used
  disablePreviewResize: false             # disable resizing of previews for faster loading over slow connections
  disableTypeDetectionByHeader: false     # disable type detection by header, useful if filesystem is slow.
  externalUrl: "https://files.myfamily.site"                         # used by share links if set (eg. http://mydomain.com)
  internalUrl: "http://raspberrypi.local:8181"                     # used by integrations if set, this is the base domain that an integration service will use to communicate with filebrowser (eg. http://localhost:8080)

  # Defined file sources (Multi-root configuration)
  sources:
    # 1. Personal Home Directories
    # Automatically creates a folder for each user (e.g., /srv/users/username)
    - path: "/users"
      name: "My Home"
      config:
        # Default: false. If true, creates the user directory if it doesn't exist.
        createUserDir: true
        # The scope applied to the user. "/" here means they see /srv/users/{username} as their root.
        defaultUserScope: "/"
        # Default: false. If true, this source is added to new users automatically.
        defaultEnabled: true

    # 2. Family Read Only
    # Intended for shared documents where users should not delete/edit.
    # NOTE: You MUST set "Read Only" permissions for this path in the Web UI (Global Rules).
    - path: "/family_docs"
      name: "Family Docs"
      config:
        defaultEnabled: true

    # 3. Media
    # Mounted to /media to allow all users to upload/download media.
    - path: "/media"
      name: "Media"
      config:
        defaultEnabled: true

auth:
  tokenExpirationHours: 24                 # time in hours each web UI session token is valid for. Default is 2 hours.
  # Authentication method configuration
  methods:
    # Standard password authentication
    password:
      enabled: true
      minLength: 8                        # minimum pasword length required, default is 5.
    # OpenID Connect (OIDC) - Disabled for now, as requested.
    oidc:
      enabled: false
    # Proxy authentication (e.g. via Authelia/Traefik headers)
    proxy:
      enabled: false
  # Prefer environment variable for admin user password, FILEBROWSER_ADMIN_PASSWORD
  # secret: the username of the admin user. If not set, the default is "admin".
  # adminUsername: "admin"
  # secret: the password of the admin user. If not set, the default is "admin".
  # adminPassword: "admin"

frontend:
  # Application name displayed in the title bar. Default: "FileBrowser"
  name: "FileBrowser"
  # Disable the "Used Percentage" bar in the UI. Default: false
  disableUsedPercentage: true
  # disable default links in the sidebar? Default: false
  disableDefaultLinks: true
  externalLinks:
  - text: "Photos"                     # the text to display on the link  validate:required
    title: "Family Immich Photos"      # the title to display on hover
    url: "https://photos.myfamily.site/" # the url to link to  validate:required

  # favicon: ""                             # path to a favicon to use for the frontend
  # description: "FileBrowser Quantum is a file manager for the web which can be used to manage files on your server" # description that shows up in html head meta description
  # loginIcon: ""                           # path to an image file for the login page 

userDefaults:
  editorQuickSave: true                   # show quick save button in editor
  hideSidebarFileActions: true            # hide the file actions in the sidebar
  disableQuickToggles: false              # disable the quick toggles in the sidebar
  disableSearchOptions: false             # disable the search options in the search bar
  stickySidebar: false                    # keep sidebar open when navigating
  darkMode: false                         # should dark mode be enabled
  locale: "en"                            # language to use: eg. de, en, or fr
  viewMode: "normal"                      # view mode to use: eg. normal, list, grid, or compact
  singleClick: true                       # open directory on single click, also enables middle click to open in new tab
  showHidden: false                       # show hidden files in the UI. On windows this includes files starting with a dot and windows hidden files
  dateFormat: false                       # when false, the date is relative, when true, the date is an exact timestamp
  gallerySize: 3                          # 0-9 - the size of the gallery thumbnails
  # themeColor: "var(--blue)"               # theme color to use: eg. #ff0000, or var(--red), var(--purple), etc
  # quickDownload: false                    # show icon to download in one click
  # disablePreviewExt: ""                   # space separated list of file extensions to disable preview for
  # disableViewingExt: ""                   # space separated list of file extensions to disable viewing for
  # lockPassword: false                     # disable the user from changing their password
  # disableSettings: false                  # disable the user from viewing the settings page
  preview:
    disableHideSidebar: false             # keep sidebar open when previewing files
    highQuality: false                    # use high quality thumbnails
    image: true                           # show thumbnails for image files
    video: true                           # show thumbnails for video files
    motionVideoPreview: false             # show multiple frames for videos in thumbnail preview when hovering
    office: true                          # show thumbnails for office files
    popup: false                          # show larger popup preview when hovering over thumbnail
    autoplayMedia: false                   # autoplay media files in preview
    defaultMediaPlayer: false             # disable the styled feature-rich media player for browser default
    folder: false                         # show thumbnails for folders that have previewable contents
  permissions:
    api: true                             # allow api access
    admin: false                          # allow admin access
    modify: true                         # allow modifying files
    share: true                          # allow sharing files
    realtime: false                       # allow realtime updates
    delete: true                         # allow deleting files
    create: true                         # allow creating or uploading files
    download: true                        # allow downloading files
  # loginMethod: "password"                 # login method to use: eg. password, proxy, oidc
  # disableUpdateNotifications: false       # disable update notifications banner for admin users
  deleteWithoutConfirming: false          # delete files without confirmation
  fileLoading:                            # upload and download settings
    maxConcurrentUpload: 5
    uploadChunkSizeMb: 10
    clearAll: false
  disableOnlyOfficeExt: ".md .txt .pdf .html .xml" # list of file extensions to disable onlyoffice editor for
  # customTheme: ""                         # Name of theme to use chosen from custom themes config.
  # showSelectMultiple: false               # show select multiple files on desktop
  # debugOffice: false                      # debug onlyoffice editor

integrations:
  media:
    # Media conversion settings for previews
    convert:
      imagePreview:
        # Enable HEIC image preview conversion? Default: false
        heic: false
      videoPreview:
        # Generate video thumbnails? Default: true for most formats
        mp4: false
        mkv: false
        avi: false
        mov: false
